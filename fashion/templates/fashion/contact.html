{% extends 'fashion/base.html' %}
{% load static %}

{% block title %}Contact Us | DOMEMILY{% endblock %}
{% block nav_contact %}active{% endblock %}

{% block extra_css %}
<style>
    /* Custom Form Styling */
    .form-group {
        position: relative;
        margin-bottom: 2rem;
    }
    
    .form-input {
        width: 100%;
        padding: 0.5rem 0;
        background: transparent;
        border: none;
        border-bottom: 1px solid #e5e5e5;
        font-family: 'Inter', sans-serif;
        font-size: 1rem;
        color: #1a1a1a;
        transition: all 0.3s ease;
    }
    
    .dark .form-input {
        border-bottom-color: #333;
        color: #fff;
    }
    
    .form-input:focus {
        outline: none;
        border-bottom-color: #C9A962;
    }
    
    .form-label {
        position: absolute;
        top: 0;
        left: 0;
        font-size: 1rem;
        color: #9ca3af;
        pointer-events: none;
        transition: all 0.3s ease;
    }
    
    .form-input:focus + .form-label,
    .form-input:not(:placeholder-shown) + .form-label {
        top: -1.25rem;
        font-size: 0.875rem;
        color: #C9A962;
    }
</style>
{% endblock %}

{% block content %}
<section class="relative pt-32 pb-20 bg-brand-cream dark:bg-[#0d0d0d] overflow-hidden">
    <div class="max-w-7xl mx-auto px-6 lg:px-8 relative z-10">
        <div class="max-w-3xl">
            <span class="reveal block text-brand-gold text-sm font-semibold uppercase tracking-wider mb-4">At Your Service</span>
            <h1 class="reveal delay-100 font-serif text-5xl md:text-7xl font-semibold text-brand-dark dark:text-white mb-8 leading-tight">
                Let's Craft Your <br>
                <span class="italic text-brand-gold">Masterpiece.</span>
            </h1>
            <p class="reveal delay-200 text-lg text-gray-600 dark:text-gray-400 max-w-xl leading-relaxed">
                Whether you have a specific design in mind or need guidance finding your perfect look, we are here to listen, advise, and create.
            </p>
        </div>
    </div>
    
    <div class="absolute top-0 right-0 w-1/3 h-full opacity-5 pointer-events-none hidden lg:block">
        <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,<svg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'><g fill=\'none\' fill-rule=\'evenodd\'><g fill=\'%23C9A962\' fill-opacity=\'1\'><path d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/></g></g></svg>');"></div>
    </div>
</section>

<section class="py-12 pb-32 bg-brand-cream dark:bg-[#0d0d0d]">
    <div class="max-w-7xl mx-auto px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-24">
            
            <div class="reveal">
                <div class="bg-white dark:bg-[#1a1a1a] p-10 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-800 h-full flex flex-col justify-between">
                    <div>
                        <h3 class="font-serif text-3xl font-semibold text-brand-dark dark:text-white mb-10">Get in Touch</h3>
                        
                        <div class="space-y-10">
                            <div class="flex items-start gap-6 group">
                                <div class="w-12 h-12 rounded-full bg-brand-gold/10 flex items-center justify-center flex-shrink-0 group-hover:bg-brand-gold/20 transition-colors">
                                    <i data-lucide="map-pin" class="w-5 h-5 text-brand-gold"></i>
                                </div>
                                <div>
                                    <span class="block text-sm font-semibold uppercase tracking-wider text-gray-400 mb-1">Visit Our Studio</span>
                                    <p class="text-lg text-brand-dark dark:text-white font-medium leading-relaxed">
                                        Sowutuom-Ofankor Rd,<br>
                                        Accra, Ghana
                                    </p>
                                    <a href="https://maps.google.com" target="_blank" class="inline-block mt-2 text-sm text-brand-clay hover:text-brand-gold transition-colors font-medium border-b border-brand-clay/30 pb-0.5">Get Directions</a>
                                </div>
                            </div>
                            
                            <div class="flex items-start gap-6 group">
                                <div class="w-12 h-12 rounded-full bg-brand-gold/10 flex items-center justify-center flex-shrink-0 group-hover:bg-brand-gold/20 transition-colors">
                                    <i data-lucide="mail" class="w-5 h-5 text-brand-gold"></i>
                                </div>
                                <div>
                                    <span class="block text-sm font-semibold uppercase tracking-wider text-gray-400 mb-1">Talk to Us</span>
                                    <p class="text-lg text-brand-dark dark:text-white font-medium">domemilyfashion@gmail.com</p>
                                    <p class="text-lg text-brand-dark dark:text-white font-medium mt-1">+233 24 995 4385</p>
                                </div>
                            </div>

                            <div class="flex items-start gap-6 group">
                                <div class="w-12 h-12 rounded-full bg-brand-gold/10 flex items-center justify-center flex-shrink-0 group-hover:bg-brand-gold/20 transition-colors">
                                    <i data-lucide="clock" class="w-5 h-5 text-brand-gold"></i>
                                </div>
                                <div>
                                    <span class="block text-sm font-semibold uppercase tracking-wider text-gray-400 mb-1">Opening Hours</span>
                                    <p class="text-brand-dark dark:text-white">Mon - Sat: 7:00 AM - 7:00 PM</p>
                                    <p class="text-gray-500 text-sm">Sunday: Closed</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-16 pt-10 border-t border-gray-100 dark:border-gray-800">
                        <span class="block text-sm text-gray-500 mb-4">Follow our latest creations</span>
                        <div class="flex gap-4">
                            <a href="#" class="w-10 h-10 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center text-gray-500 hover:bg-brand-dark hover:border-brand-dark hover:text-white transition-all duration-300">
                                <i data-lucide="instagram" class="w-4 h-4"></i>
                            </a>
                            <a href="#" class="w-10 h-10 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center text-gray-500 hover:bg-brand-dark hover:border-brand-dark hover:text-white transition-all duration-300">
                                <i data-lucide="facebook" class="w-4 h-4"></i>
                            </a>
                            <a href="https://wa.me/233249954385" class="w-10 h-10 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center text-gray-500 hover:bg-green-500 hover:border-green-500 hover:text-white transition-all duration-300">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reveal delay-100">
                <div class="h-full flex flex-col justify-center">
                    <h2 class="font-serif text-3xl font-semibold text-brand-dark dark:text-white mb-2">Send a Message</h2>
                    <p class="text-gray-600 dark:text-gray-400 mb-10">Fill out the form below and we will get back to you within 24 hours.</p>

                    <form id="contact-form" class="space-y-2">
                        {% csrf_token %}
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-4">
                            <div class="form-group">
                                <input type="text" id="name" name="name" class="form-input" placeholder=" " required>
                                <label for="name" class="form-label">Your Name</label>
                            </div>
                            
                            <div class="form-group">
                                <input type="email" id="email" name="email" class="form-input" placeholder=" " required>
                                <label for="email" class="form-label">Email Address</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <textarea id="message" name="message" rows="4" class="form-input resize-none" placeholder=" " required></textarea>
                            <label for="message" class="form-label">Tell us about your vision...</label>
                        </div>

                        <div id="form-message" class="hidden p-4 rounded-lg text-sm mb-6"></div>

                        <button type="submit" id="submit-btn" class="group relative overflow-hidden w-full py-4 bg-brand-dark dark:bg-brand-gold text-white dark:text-brand-dark font-medium rounded-full transition-all duration-300 hover:bg-brand-clay dark:hover:bg-brand-gold-light shadow-lg hover:shadow-xl">
                            <span class="relative z-10 flex items-center justify-center gap-2">
                                <span class="btn-text">Send Message</span>
                                <i data-lucide="send" class="w-4 h-4 btn-icon group-hover:translate-x-1 transition-transform"></i>
                                <svg class="btn-loader hidden animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                            </span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();
        
        // Form Handling
        const form = document.getElementById('contact-form');
        const submitBtn = document.getElementById('submit-btn');
        const btnText = submitBtn.querySelector('.btn-text');
        const btnIcon = submitBtn.querySelector('.btn-icon');
        const btnLoader = submitBtn.querySelector('.btn-loader');
        const messageDiv = document.getElementById('form-message');
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // Loading State
            btnText.textContent = 'Sending...';
            btnIcon.classList.add('hidden');
            btnLoader.classList.remove('hidden');
            submitBtn.disabled = true;
            messageDiv.classList.add('hidden');
            
            const formData = new FormData(form);
            
            try {
                const response = await fetch('{% url "api-contact-create" %}', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': formData.get('csrfmiddlewaretoken')
                    }
                });
                
                if (response.ok) {
                    // Success
                    messageDiv.textContent = "Thank you! Your message has been sent successfully.";
                    messageDiv.classList.remove('hidden', 'bg-red-50', 'text-red-700');
                    messageDiv.classList.add('bg-green-50', 'text-green-700');
                    form.reset();
                } else {
                    throw new Error('Network response was not ok');
                }
            } catch (error) {
                // Error
                messageDiv.textContent = "Something went wrong. Please try again later.";
                messageDiv.classList.remove('hidden', 'bg-green-50', 'text-green-700');
                messageDiv.classList.add('bg-red-50', 'text-red-700');
            } finally {
                // Reset Button
                btnText.textContent = 'Send Message';
                btnIcon.classList.remove('hidden');
                btnLoader.classList.add('hidden');
                submitBtn.disabled = false;
            }
        });
    });
</script>
{% endblock %}